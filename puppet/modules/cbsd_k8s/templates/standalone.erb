# standalone config
ENABLE_DEBUG="true"
MOUNT_PATH="/export"
INSTALL_PATH="$MOUNT_PATH/kubernetes/install_scripts_secure"
REPOSITORY="http://192.168.1.5"
HOSTINTERFACE="<%= @facts['networking']['primary'] %>"
HOSTIP="$( hostname -I | awk '{printf $1}' )"
WORKDIR="/export/tmp"

MASTER_HOSTNAME="master.<%= @cluster_name %>"
SERVER_DNS="${MASTER_HOSTNAME},node01.<%= @cluster_name %>,kubernetes.default.svc,kubernetes.default,kubernetes,kubernetes.default.svc.cloud,kubernetes.default.svc.cloud.uat,localhost,master,node01"
# overrided
#SERVERS="10.0.0.2:node01.<%= @cluster_name %>"
#WORKERS="10.0.0.2:node01.<%= @cluster_name %>"
#NODES="10.0.0.2:node01.<%= @cluster_name %>,10.0.0.2:${MASTER_HOSTNAME}"
CLUSTER="<%= @cluster_name %>"
CERTIFICATE="$MOUNT_PATH/kubecertificate"
CERTIFICATE_MOUNT_PATH="${CERTIFICATE}/certs/"
CA_CERTIFICATE="${CERTIFICATE_MOUNT_PATH}/ca.crt"
CLIENT_CERTIFICATE="${CERTIFICATE_MOUNT_PATH}/admin.crt"
CLIENT_KEY="${CERTIFICATE_MOUNT_PATH}/admin.key"
ETCD_CLUSTERS="10.0.0.2:master"
HAPROXY="<%= @vip %>"
FLANNEL_NET="172.17.0.0/16"
CLUSTERIPRANGE="172.18.0.0/24"
CLUSTER_NON_MASQUEARADE_CIDR="172.17.0.0/15"
API_SERVER="<%= @api_server %>"
API_SERVERS="<%= @api_servers %>"
APISERVER_HOST="<%= @apiserver_host %>"
ETCD_CLUSTERS_CERTS="10.0.0.2:node01.<%= @cluster_name %>,10.0.0.2:${MASTER_HOSTNAME}"
DOMAIN="<%= @cluster_name %>"
ENABLE_ETCD_SSL="true"
ENABLE_KUBE_SSL="true"
ENABLE_OIDC="true"
INGRESS_HOST="${MASTER_HOSTNAME}"
INSTALL_INGRESS="false"

ETCDSERVERS="https://10.0.0.2:2379"
MASTER_1_IP="10.0.0.2"
ADVERTISE_IP="$MASTER_1_IP"
ETCD_1_IP="${MASTER_1_IP}"
#ETCD_1_NAME="node01"
ETCD_1_NAME="master"
DNS_IP="172.18.0.2"
YOUR_DOMAIN="cloud.uat"
INSTALL_KUBELET_ON_MASTER="true"
INSTALL_DASHBOARD="false"
INSTALL_SKYDNS="false"
INSTALL_COREDNS="true"
#INSTALL_HEAPSTER="true"
INSTALL_HEAPSTER="false"
SKYDNS_DOMAIN_NAME="cloud.uat"
#ETCD_VER="v3.2.18"
ETCD_VER="<%= @etcd_ver %>"
ETCD_VERSION="etcd-${ETCD_VER}-linux-amd64"
ETCD_FETCH_URL="https://github.com/coreos/etcd/releases/download/${ETCD_VER}/etcd-${ETCD_VER}-linux-amd64.tar.gz"
FLANNEL_VER="v0.12.0"
FLANNEL_VERSION="flannel-${FLANNEL_VER}-linux-amd64"
FLANNEL_FETCH_URL="https://github.com/coreos/flannel/releases/download/${FLANNEL_VER}/flannel-${FLANNEL_VER}-linux-amd64.tar.gz"
#K8S_VER="v1.15.11"
#K8S_VER="v1.18.9"
K8S_VER="v1.19.4"
K8S_FETCH_URL="https://dl.k8s.io/${K8S_VER}/kubernetes-server-linux-amd64.tar.gz"

#K8S_BIN_FILES="hyperkube kubeadm kube-apiserver kubelet kube-proxy kubectl"
K8S_BIN_FILES="kubeadm kube-apiserver kubelet kube-proxy kubectl"

# Cert
CA_COUNTRY="RU"
CA_STATE="Nort-West Russia"
CA_LOCALITY="GN"
CA_ORGANIZATION="ConvectIX"
CA_ORGU="IT"
CA_EMAIL="noc@convectix.com"
CA_COMMONNAME="k8s-dep"
CA_DAYS="3650"

CERT_KEY_BIT="4096"

# override by bootstrap helper
[ -r /home/ubuntu/bootstrap.config ] && . /home/ubuntu/bootstrap.config
